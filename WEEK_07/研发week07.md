## 研发week06

林泽鸿（后台）

### 一周总结

这周的进度较预期来说较慢，关键是在文件上传那里卡了两天，差点挂了。问题在于自己还不是很熟悉JS代码的语法，我本来用AJAX传输一张图片到服务器，然后打算存放在我的磁盘里面，返回一个相对于项目的路径（完整的路径：绝对路径），之前本来就用表单提交实现了的东西，就用了一下JS调用发送AJAX请求过去服务器，然后可以写到我的磁盘里面，但得到的文件的大小是空的。这就证明是我传输的时候没有拿到值，找了大半天，才发现我的JS代码写错了，它这里的全局变量和C语言中的全局变量完全不同。一开始我就是将还没提交文件的表单赋值给全局变量（form变量直接赋给FormData），也就是空，然后再进行函数的调用( onchange() )。然后这里的函数再次赋值已经失效了，赋值是没用的。因此一直都是空文件，被这个bug纠缠了两天，进度较自己规划较慢。

这周就要加快做考核的进度了，目前剩下文章和聊天这两个大块头还没有完成，还有一些细细碎碎的东西（邮箱，表单验证（之前完成了大部分），不同用户的功能权限，代码的规范）。文章目前是完成了编辑的功能，但界面还没完全搞好。到最后可能要剩几天来抠一些细节，所以剩下的功能要尽快完成了。

### 存在不足

1.放假期间较为松散，学习效率较低（有时候为了完成一些功能，熬夜到三四点，导致第二天到很晚才起来）

2.总体进度完成较慢，在规划时应能够激发自己的潜力（努力完成项目的功能）

3.表结构设计还是不合理，上次的文章评论功能还是按最先的弄比较合理，因为要是按上周的弄，会出现K叉树的情况，要删除某个节点，要先把它的叶子节点删了，进行递归，这种涉及到算法，可能自己写出来的话，一堆BUG，所以按之前的就可以实现文章的评论和回复功能了。

4.我想到聊天系统的功能不仅仅是消息的发送，可能这个用户还会删除自己的消息记录，所以我重新设计了聊天系统的表结构。将简单的用户聊天表分成【1.聊天消息表】，【2.聊天记录表】，借助【3.用户表】 

​	<1>聊天消息表只能在存放用户的聊天消息，用户不能进行删除操作----设置定期删除过期的数据库记录

​	<2>聊天记录表代表用户对应聊天消息表中哪一条消息，设置一个状态量（代表用户对应的消息是否已被用户删除）

### 上周规划完成情况

~~1.完成用户的关注功能~~

~~2.完成用户的添加好友功能~~

~~3.开始进行文章的编辑功能的实现~~

4.文章的显示功能

### 下周规划

1.文章的显示功能

2.文章列表的实现

3.文章分组功能（可自己添加分组）

4.好友分组

5.豆邮的实现（邮箱）

6.初步进行聊天功能（WebSocket实现）



### 一些重要知识点和知识总结

有道云笔记

JS：http://note.youdao.com/noteshare?id=d62e7804865912eb4b1d54d9924bc0a2

AJAX:http://note.youdao.com/noteshare?id=e7a1ce0a3192fdce837b958079eb479f

